<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="baidu-site-verification" content="1EB8XoOl0C"><meta name="google-site-verification" content="K7thEgdLm0UfRWJ5MGdF7sCcjClSzAlxFLPv2Oz5CGM"><title> C#与MySQL交互 · MJ's Blog</title><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="C#与MySQL交互 - MJ"><meta name="keywords"><meta name="author" content="MJ"><link rel="short icon" href="/images/assassins_creed.ico"><link rel="stylesheet" href="/css/bubuzou.css"><link rel="search" type="application/opensearchdescription+xml" href="https://weimingjuncn.github.io/atom.xml" title="MJ's Blog"><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script><meta name="generator" content="Hexo 4.2.0"></head><body><header><div class="header row"> <a href="/" class="logo-link"><img src="/images/assassins_creed_white.png"></a><ul id="nav_list" class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" data-hover="博文" class="nav-list-link">博文</a></li><li class="nav-list-item"><a href="/archives/" target="_self" data-hover="归档" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/about/" target="_self" data-hover="关于" class="nav-list-link">关于</a></li></ul><div class="search"><a id="search_btn" href="#search"></a></div><div id="nav_btn" class="nav-btn"><span></span><span></span><span></span></div></div></header><div class="row scroll-con"><section class="container"><!-- for archive page--><div id="postAr" class="post"><article class="post-block"><h1 class="post-title">C#与MySQL交互</h1><div class="post-info">2020-04-06</div><div class="post-content"><ul>
<li>MySQL的基础使用</li>
<li>C#与MySQL的交互</li>
<li>实战：账号注册和登录的功能开发</li>
</ul>
<a id="more"></a>

<h1 id="为什么要学习MySQL及其应用？"><a href="#为什么要学习MySQL及其应用？" class="headerlink" title="为什么要学习MySQL及其应用？"></a>为什么要学习MySQL及其应用？</h1><p>主要作用：集中管理网络游戏中所有玩家的数据与游戏中固定核心数据</p>
<ol>
<li>数据库主要应用再网路游戏开发中</li>
<li>因为网络上有成百上千的玩家，如果把数据存储到每个玩家的本地，管理起来就有很大的风险，其一是玩家更换设备就意味着数据会丢失</li>
<li>如果把数据放在玩家本地，玩家就可以篡改数据，以达到作弊的目的</li>
<li>把数据存放在本地，不方便玩家之间的交互</li>
<li>与微软的SQLServer对比，MySQL更加轻量级，使用起来更加方便</li>
</ol>
<p>官网：<a href="http://www.mysql.com/" target="_blank" rel="noopener">http://www.mysql.com/</a></p>
<p>使用5.7版本，因为相对比较稳定</p>
<h1 id="MySQL的基础使用"><a href="#MySQL的基础使用" class="headerlink" title="MySQL的基础使用"></a>MySQL的基础使用</h1><p>安装MySQL 5.7.11.0和MySQL-Front以后将两者打开，我们主要在MySQL-Front（汉化界面）操作数据库。</p>
<p>打开MySQL-Front后选中127.0.0.1，右键选择新建|数据库</p>
<p><img src="/2020/04/06/C%20Sharp%E4%B8%8EMySql%E4%BA%A4%E4%BA%92/image-20200413210049278.png" alt="image-20200413210049278"></p>
<p>名称填game，其他默认，点击确定。</p>
<p><img src="/2020/04/06/C%20Sharp%E4%B8%8EMySql%E4%BA%A4%E4%BA%92/image-20200413210156333.png" alt="image-20200413210156333"></p>
<p>要删除数据库，只需右键game，点击删除即可。</p>
<p>我们选择game，右键选择新建|表格，在弹出的窗口中，名称填写user，点击确定创建一个表格</p>
<p>要删除表格，只需右键user，点击删除即可。</p>
<p>表格的Id字段在我们创建表格时自动创建了，我们再添加其他字段。选中表格user右键，选择新建|字段，名称填写account，类型设置“VarChar”，其他默认，点击确定。</p>
<p><img src="/2020/04/06/C%20Sharp%E4%B8%8EMySql%E4%BA%A4%E4%BA%92/image-20200413211141716.png" alt="image-20200413211141716"></p>
<p>添加字段“password”如下</p>
<p><img src="/2020/04/06/C%20Sharp%E4%B8%8EMySql%E4%BA%A4%E4%BA%92/image-20200413211333185.png" alt="image-20200413211333185"></p>
<p>点击数据浏览器，接下来进行添加数据</p>
<p><img src="/2020/04/06/C%20Sharp%E4%B8%8EMySql%E4%BA%A4%E4%BA%92/image-20200413211536502.png" alt="image-20200413211536502"></p>
<p>直接点击字段下的空白，然后输入数据，点击发布按钮即可</p>
<p><img src="/2020/04/06/C%20Sharp%E4%B8%8EMySql%E4%BA%A4%E4%BA%92/image-20200413211742171.png" alt="image-20200413211742171"></p>
<p>点击插入数据按钮，申请一行供插入数据，点击其右边的删除数据按钮删除一行数据。</p>
<p><img src="/2020/04/06/C%20Sharp%E4%B8%8EMySql%E4%BA%A4%E4%BA%92/image-20200413211947211.png" alt="image-20200413211947211"></p>
<p>点击SQL编辑器，然后通过SQL指令查询数据</p>
<p><img src="/2020/04/06/C%20Sharp%E4%B8%8EMySql%E4%BA%A4%E4%BA%92/image-20200413212322437.png" alt="image-20200413212322437"></p>
<p><img src="/2020/04/06/C%20Sharp%E4%B8%8EMySql%E4%BA%A4%E4%BA%92/image-20200413212509122.png" alt="image-20200413212509122"></p>
<p><img src="/2020/04/06/C%20Sharp%E4%B8%8EMySql%E4%BA%A4%E4%BA%92/image-20200413212610862.png" alt="image-20200413212610862"></p>
<h1 id="C-与MySQL的交互"><a href="#C-与MySQL的交互" class="headerlink" title="C#与MySQL的交互"></a>C#与MySQL的交互</h1><h2 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h2><p>连接数据库</p>
<p>定义SQL操作语句：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">to</span> 表名（字段<span class="number">1</span>，字段<span class="number">2</span>，字段<span class="number">3</span>，...）<span class="keyword">values</span>（值<span class="number">1</span>，值<span class="number">2</span>，值<span class="number">3</span>，...）</span><br></pre></td></tr></table></figure>

<p>构建MySqlCommand，传递操作的sql语句和连接的实例</p>
<p>连接的实例需要先调用Open打开数据库</p>
<p>调用ExecuteNonQuery</p>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>用VS2017创建一个项目Project_MySQL，添加引用<strong>MySql.Data.dll</strong></p>
<p>编辑Program.cs如下：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"><span class="keyword">using</span> System.Threading.Tasks;</span><br><span class="line"><span class="keyword">using</span> MySql.Data.MySqlClient;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Project_MySQL</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Insert();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> MySqlConnection <span class="title">Connection</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">string</span> sqlInfo = <span class="string">"server=127.0.0.1;"</span> +</span><br><span class="line">                            <span class="string">"port=3306;"</span> +</span><br><span class="line">                            <span class="string">"database=game;"</span> +</span><br><span class="line">                            <span class="string">"user=root;"</span> +</span><br><span class="line">                            <span class="string">"password=12345"</span>;</span><br><span class="line">            MySqlConnection mySqlConnection = <span class="keyword">new</span> MySqlConnection(sqlInfo);</span><br><span class="line">            <span class="keyword">return</span> mySqlConnection;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Insert</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            MySqlConnection client = Connection();<span class="comment">//连接数据库</span></span><br><span class="line">            <span class="comment">//插入操作的sql语句</span></span><br><span class="line">            <span class="keyword">string</span> addCmd = <span class="string">"insert into user(Id,account,password) "</span> +</span><br><span class="line">                <span class="string">"value(1005,\"a777\",555555)"</span>;</span><br><span class="line">            <span class="comment">//用于执行sql命令的对象</span></span><br><span class="line">            MySqlCommand mySqlCommand = <span class="keyword">new</span> MySqlCommand(addCmd, client);</span><br><span class="line">            client.Open();</span><br><span class="line">            <span class="keyword">int</span> result = mySqlCommand.ExecuteNonQuery();</span><br><span class="line">            <span class="keyword">if</span>(result &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">"插入成功！"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">"插入失败！"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            client.Close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>程序运行后控制台打印“插入成功！”</p>
<p>在数据库里看到成功添加一行数据</p>
<p><img src="/2020/04/06/C%20Sharp%E4%B8%8EMySql%E4%BA%A4%E4%BA%92/image-20200413205024575.png" alt="image-20200413205024575"></p>
<h2 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段名称<span class="number">1</span>=新的值<span class="number">2</span>, 字段名称<span class="number">2</span>=新的值<span class="number">2</span>, ... <span class="keyword">where</span> 字段名称=值 <span class="keyword">and</span> 字段名称=值 ...</span><br></pre></td></tr></table></figure>

<p>要注意SQL操作语句中的条件是否能在数据库中找到相应的数据</p>
<h3 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h3><p>修改Program.cs如下：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"><span class="keyword">using</span> System.Threading.Tasks;</span><br><span class="line"><span class="keyword">using</span> MySql.Data.MySqlClient;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Project_MySQL</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Update();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> MySqlConnection <span class="title">Connection</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">string</span> sqlInfo = <span class="string">"server=127.0.0.1;"</span> +</span><br><span class="line">                            <span class="string">"port=3306;"</span> +</span><br><span class="line">                            <span class="string">"database=game;"</span> +</span><br><span class="line">                            <span class="string">"user=root;"</span> +</span><br><span class="line">                            <span class="string">"password=12345"</span>;</span><br><span class="line">            MySqlConnection mySqlConnection = <span class="keyword">new</span> MySqlConnection(sqlInfo);</span><br><span class="line">            <span class="keyword">return</span> mySqlConnection;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            MySqlConnection client = Connection();<span class="comment">//连接数据库</span></span><br><span class="line">            <span class="comment">//修改操作的sql语句</span></span><br><span class="line">            <span class="keyword">string</span> addCmd = <span class="string">"update user set password=333 where account=\"hongqigong\" "</span>;</span><br><span class="line">            <span class="comment">//用于执行sql命令的对象</span></span><br><span class="line">            MySqlCommand mySqlCommand = <span class="keyword">new</span> MySqlCommand(addCmd, client);</span><br><span class="line">            client.Open();</span><br><span class="line">            <span class="keyword">int</span> result = mySqlCommand.ExecuteNonQuery();</span><br><span class="line">            <span class="keyword">if</span> (result &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">"修改成功！"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">"修改失败！"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            client.Close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行程序后控制台打印消息“修改成功！”。</p>
<p>刷新数据库，表格里的数据也得到正确修改</p>
<p><img src="/2020/04/06/C%20Sharp%E4%B8%8EMySql%E4%BA%A4%E4%BA%92/image-20200413213640327.png" alt="image-20200413213640327"></p>
<h2 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表的名称 条件语句 <span class="keyword">where</span> 字段名称=值 <span class="keyword">and</span> 字段名称=值</span><br></pre></td></tr></table></figure>

<h3 id="例子-2"><a href="#例子-2" class="headerlink" title="例子"></a>例子</h3><p>修改Program.cs如下：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"><span class="keyword">using</span> System.Threading.Tasks;</span><br><span class="line"><span class="keyword">using</span> MySql.Data.MySqlClient;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Project_MySQL</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Delete();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> MySqlConnection <span class="title">Connection</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">string</span> sqlInfo = <span class="string">"server=127.0.0.1;"</span> +</span><br><span class="line">                            <span class="string">"port=3306;"</span> +</span><br><span class="line">                            <span class="string">"database=game;"</span> +</span><br><span class="line">                            <span class="string">"user=root;"</span> +</span><br><span class="line">                            <span class="string">"password=12345"</span>;</span><br><span class="line">            MySqlConnection mySqlConnection = <span class="keyword">new</span> MySqlConnection(sqlInfo);</span><br><span class="line">            <span class="keyword">return</span> mySqlConnection;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 删除数据</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Delete</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            MySqlConnection client = Connection();<span class="comment">//连接数据库</span></span><br><span class="line">            <span class="comment">//删除操作的sql语句</span></span><br><span class="line">            <span class="keyword">string</span> addCmd = <span class="string">"delete from user where account=\"hongqigong\" "</span>;</span><br><span class="line">            <span class="comment">//用于执行sql命令的对象</span></span><br><span class="line">            MySqlCommand mySqlCommand = <span class="keyword">new</span> MySqlCommand(addCmd, client);</span><br><span class="line">            client.Open();</span><br><span class="line">            <span class="keyword">int</span> result = mySqlCommand.ExecuteNonQuery();</span><br><span class="line">            <span class="keyword">if</span> (result &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">"删除成功！"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">"删除失败！"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            client.Close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>程序运行后，成功删除game数据库user表格中account为hongqigong的那一条数据。</p>
<h2 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> *<span class="keyword">from</span> 表名 条件</span><br></pre></td></tr></table></figure>

<p>MySQLCommand构建的时候传递操作的sql语句，与连接的实例。</p>
<h3 id="例子-3"><a href="#例子-3" class="headerlink" title="例子"></a>例子</h3><p>修改Program.cs如下：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"><span class="keyword">using</span> System.Threading.Tasks;</span><br><span class="line"><span class="keyword">using</span> MySql.Data.MySqlClient;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Project_MySQL</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            Select();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> MySqlConnection <span class="title">Connection</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">string</span> sqlInfo = <span class="string">"server=127.0.0.1;"</span> +</span><br><span class="line">                            <span class="string">"port=3306;"</span> +</span><br><span class="line">                            <span class="string">"database=game;"</span> +</span><br><span class="line">                            <span class="string">"user=root;"</span> +</span><br><span class="line">                            <span class="string">"password=12345"</span>;</span><br><span class="line">            MySqlConnection mySqlConnection = <span class="keyword">new</span> MySqlConnection(sqlInfo);</span><br><span class="line">            <span class="keyword">return</span> mySqlConnection;</span><br><span class="line">        &#125;&#125;</span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 查询数据</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Select</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">string</span> cmd = <span class="string">"select *from user"</span>;</span><br><span class="line">            MySqlConnection client = Connection();<span class="comment">//连接数据库</span></span><br><span class="line">            <span class="comment">//用于执行sql命令的对象</span></span><br><span class="line">            MySqlCommand mySqlCommand = <span class="keyword">new</span> MySqlCommand(cmd, client);</span><br><span class="line">            client.Open();</span><br><span class="line">            <span class="comment">//执行读取 查询业务 返回的时查询到的数据</span></span><br><span class="line">            MySqlDataReader mySqlData = mySqlCommand.ExecuteReader();</span><br><span class="line">            <span class="comment">//循环读取 mySqlData.Read内部 控制指针每次读取后往下一条数据进行移动</span></span><br><span class="line">            <span class="keyword">while</span> (mySqlData.Read())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">string</span> account = mySqlData.GetString(<span class="string">"account"</span>);</span><br><span class="line">                <span class="keyword">int</span> id = mySqlData.GetInt32(<span class="string">"Id"</span>);</span><br><span class="line">                <span class="keyword">int</span> password = mySqlData.GetInt32(<span class="string">"password"</span>);</span><br><span class="line">                Console.WriteLine(id + <span class="string">" "</span> + account + <span class="string">" "</span> + password);</span><br><span class="line">            &#125;</span><br><span class="line">            Console.WriteLine(<span class="string">"读取结束"</span>);</span><br><span class="line">            mySqlData.Close();</span><br><span class="line">            client.Close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行程序后，控制台打印当前从数据库表格里查询到所有数据。</p>
<p><img src="/2020/04/06/C%20Sharp%E4%B8%8EMySql%E4%BA%A4%E4%BA%92/image-20200413220950808.png" alt="image-20200413220950808"></p>
<h1 id="实战：账号注册和登录的功能开发"><a href="#实战：账号注册和登录的功能开发" class="headerlink" title="实战：账号注册和登录的功能开发"></a>实战：账号注册和登录的功能开发</h1><p>注册功能：</p>
<ol>
<li>接收用户输入的账号和密码</li>
<li>判断数据库中是否已经存在相同的账号</li>
<li>如果没有就可以往内部添加</li>
<li>如果有，就提示用户账号已存在</li>
</ol>
<p>登录功能：</p>
<ol>
<li>接收用户输入的账号和密码</li>
<li>判断数据库中是否有匹配的记录</li>
<li>如果有，告知用户登录成功</li>
<li>如果没有，告知用户登录失败</li>
</ol>
<p>修改Program.cs如下：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"><span class="keyword">using</span> System.Threading.Tasks;</span><br><span class="line"><span class="keyword">using</span> MySql.Data.MySqlClient;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Project_MySQL</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">string</span> account = <span class="string">""</span>;</span><br><span class="line">                <span class="keyword">int</span> pwd;</span><br><span class="line">                Console.WriteLine(<span class="string">"请输入，1：登录，2：注册"</span>);</span><br><span class="line">                <span class="keyword">int</span> cmd = <span class="keyword">int</span>.Parse(Console.ReadLine());</span><br><span class="line">                <span class="keyword">if</span> (cmd == <span class="number">1</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//登录</span></span><br><span class="line">                    Console.WriteLine(<span class="string">"请输入账号："</span>);</span><br><span class="line">                    account = Console.ReadLine();</span><br><span class="line">                    Console.WriteLine(<span class="string">"请输入密码："</span>);</span><br><span class="line">                    pwd = <span class="keyword">int</span>.Parse(Console.ReadLine());</span><br><span class="line">                    <span class="comment">//数据库进行查询，如果存在匹配的记录，告诉用户登录成功</span></span><br><span class="line">                    <span class="keyword">bool</span> result = Select(<span class="string">"where account = \""</span> + account +</span><br><span class="line">                        <span class="string">"\" and "</span> + <span class="string">"password = "</span> + pwd);</span><br><span class="line">                    <span class="keyword">if</span> (result == <span class="literal">true</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        Console.WriteLine(<span class="string">"登录成功"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        Console.WriteLine(<span class="string">"登录失败，请检查账号或者密码"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (cmd == <span class="number">2</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//注册</span></span><br><span class="line">                    Console.WriteLine(<span class="string">"请输入账号："</span>);</span><br><span class="line">                    account = Console.ReadLine();</span><br><span class="line">                    Console.WriteLine(<span class="string">"请输入密码："</span>);</span><br><span class="line">                    pwd = <span class="keyword">int</span>.Parse(Console.ReadLine());</span><br><span class="line">                    <span class="comment">//数据库进行查询，如果存在匹配的记录，告诉用户账户已存在</span></span><br><span class="line">                    <span class="keyword">bool</span> result = Select(String.Format(<span class="string">"where account=\"&#123;0&#125;\""</span>, account));</span><br><span class="line">                    <span class="keyword">if</span> (result == <span class="literal">true</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        Console.WriteLine(<span class="string">"账户已存在，注册失败！"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="comment">//如果没有，插入数据。插入成功，通知用户，注册成功。</span></span><br><span class="line">                        <span class="keyword">bool</span> insertResult = Insert(account, pwd);</span><br><span class="line">                        <span class="keyword">if</span> (insertResult)</span><br><span class="line">                        &#123;</span><br><span class="line">                            Console.WriteLine(<span class="string">"注册成功！"</span>);</span><br><span class="line"></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span></span><br><span class="line">                        &#123;</span><br><span class="line">                            Console.WriteLine(<span class="string">"注册失败，可能已被抢注"</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> MySqlConnection <span class="title">Connection</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">string</span> sqlInfo = <span class="string">"server=127.0.0.1;"</span> +</span><br><span class="line">                            <span class="string">"port=3306;"</span> +</span><br><span class="line">                            <span class="string">"database=game;"</span> +</span><br><span class="line">                            <span class="string">"user=root;"</span> +</span><br><span class="line">                            <span class="string">"password=12345"</span>;</span><br><span class="line">            MySqlConnection mySqlConnection = <span class="keyword">new</span> MySqlConnection(sqlInfo);</span><br><span class="line">            <span class="keyword">return</span> mySqlConnection;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 修改数据</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            MySqlConnection client = Connection();<span class="comment">//连接数据库</span></span><br><span class="line">            <span class="comment">//修改操作的sql语句</span></span><br><span class="line">            <span class="keyword">string</span> addCmd = <span class="string">"update user set password=333 where account=\"hongqigong\" "</span>;</span><br><span class="line">            <span class="comment">//用于执行sql命令的对象</span></span><br><span class="line">            MySqlCommand mySqlCommand = <span class="keyword">new</span> MySqlCommand(addCmd, client);</span><br><span class="line">            client.Open();</span><br><span class="line">            <span class="keyword">int</span> result = mySqlCommand.ExecuteNonQuery();</span><br><span class="line">            <span class="keyword">if</span> (result &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">"修改成功！"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">"修改失败！"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            client.Close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 删除数据</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Delete</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            MySqlConnection client = Connection();<span class="comment">//连接数据库</span></span><br><span class="line">            <span class="comment">//删除操作的sql语句</span></span><br><span class="line">            <span class="keyword">string</span> addCmd = <span class="string">"delete from user where account=\"hongqigong\" "</span>;</span><br><span class="line">            <span class="comment">//用于执行sql命令的对象</span></span><br><span class="line">            MySqlCommand mySqlCommand = <span class="keyword">new</span> MySqlCommand(addCmd, client);</span><br><span class="line">            client.Open();</span><br><span class="line">            <span class="keyword">int</span> result = mySqlCommand.ExecuteNonQuery();</span><br><span class="line">            <span class="keyword">if</span> (result &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">"删除成功！"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">"删除失败！"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            client.Close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 查询数据</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Select</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">string</span> cmd = <span class="string">"select *from user"</span>;</span><br><span class="line">            MySqlConnection client = Connection();<span class="comment">//连接数据库</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//用于执行sql命令的对象</span></span><br><span class="line">            MySqlCommand mySqlCommand = <span class="keyword">new</span> MySqlCommand(cmd, client);</span><br><span class="line">            client.Open();</span><br><span class="line">            <span class="comment">//执行读取 查询业务 返回的时查询到的数据</span></span><br><span class="line">            MySqlDataReader mySqlData = mySqlCommand.ExecuteReader();</span><br><span class="line">            <span class="comment">//循环读取 mySqlData.Read内部 控制指针每次读取后往下一条数据进行移动</span></span><br><span class="line">            <span class="keyword">while</span> (mySqlData.Read())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">string</span> account = mySqlData.GetString(<span class="string">"account"</span>);</span><br><span class="line">                <span class="keyword">int</span> id = mySqlData.GetInt32(<span class="string">"Id"</span>);</span><br><span class="line">                <span class="keyword">int</span> password = mySqlData.GetInt32(<span class="string">"password"</span>);</span><br><span class="line">                Console.WriteLine(id + <span class="string">" "</span> + account + <span class="string">" "</span> + password);</span><br><span class="line">            &#125;</span><br><span class="line">            Console.WriteLine(<span class="string">"读取结束"</span>);</span><br><span class="line">            mySqlData.Close();</span><br><span class="line">            client.Close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 查询账号和密码是否有匹配的记录</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="whereSQL"&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">Select</span>(<span class="params"><span class="keyword">string</span> whereSQL</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">string</span> cmd = <span class="string">"select *from user "</span> + whereSQL;</span><br><span class="line">            MySqlConnection client = Connection();<span class="comment">//连接数据库</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//用于执行sql命令的对象</span></span><br><span class="line">            MySqlCommand mySqlCommand = <span class="keyword">new</span> MySqlCommand(cmd, client);</span><br><span class="line">            client.Open();</span><br><span class="line">            <span class="comment">//执行读取 查询业务 返回的时查询到的数据</span></span><br><span class="line">            MySqlDataReader mySqlData = mySqlCommand.ExecuteReader();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (mySqlData.Read())</span><br><span class="line">            &#123;</span><br><span class="line">                mySqlData.Close();</span><br><span class="line">                client.Close();</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                mySqlData.Close();</span><br><span class="line">                client.Close();</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> id = <span class="number">1000</span>;</span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 添加数据</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="account"&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name="pwd"&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">Insert</span>(<span class="params"><span class="keyword">string</span> account,<span class="keyword">int</span> pwd</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            MySqlConnection client = Connection();<span class="comment">//连接数据库</span></span><br><span class="line">            <span class="comment">//插入操作的sql语句</span></span><br><span class="line">            <span class="keyword">string</span> addCmd = <span class="keyword">string</span>.Format(<span class="string">"insert into user(account,password) "</span> +</span><br><span class="line">                <span class="string">"value(\"&#123;0&#125;\",&#123;1&#125;)"</span>, account, pwd);</span><br><span class="line">            <span class="comment">//用于执行sql命令的对象</span></span><br><span class="line">            MySqlCommand mySqlCommand = <span class="keyword">new</span> MySqlCommand(addCmd, client);</span><br><span class="line"></span><br><span class="line">            client.Open();</span><br><span class="line">            <span class="keyword">int</span> result = mySqlCommand.ExecuteNonQuery();</span><br><span class="line">            client.Close();</span><br><span class="line">            <span class="keyword">if</span> (result &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">"插入成功！"</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">"插入失败！"</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div></article></div><div class="right-container"><div class="widget"><div id="arAnchorBar"></div></div></div></section></div><div class="right-menu"></div><div class="modal search-modal"><div class="input-field"><input type="text" id="search_input"><label for="search-input">搜索</label></div><div id="search_result" class="search-result"></div></div><div class="blog-overlay"></div><footer class="row"><div class="footer-con"><div class="paginator"><a href="/2020/04/09/%E7%94%A8Unity%202019%E5%88%B6%E4%BD%9C%E4%BF%84%E7%BD%97%E6%96%AF%E6%96%B9%E5%9D%97/" title="用Unity 2019制作俄罗斯方块" class="prev">PREV</a><a href="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/" title="UGUI图形交互系统" class="next">NEXT</a></div><div class="copyright"><p>© 2016 - 2020 <a target="_blank">MJ</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> <br> and <a href="https://github.com/Bulandent/hexo-theme-bubuzou" target="_blank">hexo-theme-bubuzou</a></p><p> <span style="padding-right: 6px;">闽ICP备16007301号-2</span></p></div><div class="totop"><i></i></div></div></footer><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script src="/scripts/jquery-1.8.2.min.js"></script><script src="/scripts/ar-anchor.js"></script><script src="/scripts/main.js"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>