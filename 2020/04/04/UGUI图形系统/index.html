<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="baidu-site-verification" content="1EB8XoOl0C"><meta name="google-site-verification" content="K7thEgdLm0UfRWJ5MGdF7sCcjClSzAlxFLPv2Oz5CGM"><title> UGUI图形交互系统 · MJ's Blog</title><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="UGUI图形交互系统 - MJ"><meta name="keywords"><meta name="author" content="MJ"><link rel="short icon" href="/images/QuestIcon.png"><link rel="stylesheet" href="/css/bubuzou.css"><link rel="search" type="application/opensearchdescription+xml" href="http://eighthoursleep.gitee.io/atom.xml" title="MJ's Blog"><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script><meta name="generator" content="Hexo 4.2.0"></head><body><header><div class="header row"> <a href="/" class="logo-link"><img src="/images/dragonIcon.png"></a><ul id="nav_list" class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" data-hover="博文" class="nav-list-link">博文</a></li><li class="nav-list-item"><a href="/archives/" target="_self" data-hover="归档" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/about/" target="_self" data-hover="关于" class="nav-list-link">关于</a></li></ul><div class="search"><a id="search_btn" href="#search"></a></div><div id="nav_btn" class="nav-btn"><span></span><span></span><span></span></div></div></header><div class="row scroll-con"><section class="container"><!-- for archive page--><div id="postAr" class="post"><article class="post-block"><h1 class="post-title">UGUI图形交互系统</h1><div class="post-info">2020-04-04</div><div class="post-content"><p>Unity版本：Unity 2019.3.4f1</p>
<a id="more"></a>

<h1 id="画布与事件系统"><a href="#画布与事件系统" class="headerlink" title="画布与事件系统"></a>画布与事件系统</h1><h2 id="画布用于承载所有UI元素"><a href="#画布用于承载所有UI元素" class="headerlink" title="画布用于承载所有UI元素"></a>画布用于承载所有UI元素</h2><p>在Hierarchy(层级窗口)空白处右键|UI|Canvas(画布)，创建一个画布，此时事件系统（EventSystem）也会自动被创建。</p>
<p>我们可以选中画布，创建子项——UI元素比如图片（UI | Image）、按钮(UI | Button)。</p>
<h2 id="画布有三种模式"><a href="#画布有三种模式" class="headerlink" title="画布有三种模式"></a>画布有三种模式</h2><p>选中画布，在检查器（Inspector窗口）|画布（Canvas）组件|渲染模式（Render Mode）进行设置。</p>
<ol>
<li>屏幕空间 - 覆盖（Scream Space - Overlay）</li>
<li>屏幕空间 - 摄像机（Scream Space - Camera）</li>
<li>世界空间（World Space）</li>
</ol>
<p>在<strong>Scream Space - Overlay</strong>模式下，<strong>所有UI元素都显示在画面最前端</strong>。</p>
<p>如果我们在画布上放一个Image，颜色设置为黄颜色，主摄像机前放一个白色的Cube。我们无论在场景窗口里怎么放置Cube，都无法挡住画布上的黄颜色Image。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200404205327401.png" alt="image-20200404205327401"></p>
<p>当我们将渲染模式设置为<strong>Scream Space - Camera</strong>时，把Main Camera拖拽到Render Mode下方的Render Camera，设置Plane Distance为2。这时我们将Cube移动靠近摄像机，画布上的Image可以被Cube挡住。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200404211200418.png" alt="image-20200404211200418"></p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200404210645047.png" alt="image-20200404210645047"></p>
<p>屏幕空间 - 摄像机模式使用较少，适用于比如说在UI前边播放3D粒子效果。</p>
<p>当我们把渲染模式设置为World Space，画布可以随意移动和改变大小（前两个模式不可以），但只有出现在摄像机视野内才会被渲染到。适用于制作游戏中的敌人血条、立体互动广告牌等。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200404212143185.png" alt="image-20200404212143185"></p>
<h2 id="画布的缩放"><a href="#画布的缩放" class="headerlink" title="画布的缩放"></a>画布的缩放</h2><p>画布可以在Canvas Scaler（画布缩放器）组件下设定缩放模式以适配市面上的不同大小的手机屏幕。</p>
<p>设置UI Sale Mode（画布缩放模式）为Scale with Screen Size（屏幕大小调整）可以设置Reference Resolution（参考分辨率）。</p>
<h2 id="事件系统"><a href="#事件系统" class="headerlink" title="事件系统"></a>事件系统</h2><p>事件系统（EventSystem）是用于处理各个UI控件交互，如果删除事件系统，或者把画布的Graphic Raycaster组件取消勾选，播放游戏，点击画面中的按钮将毫无反应。</p>
<h1 id="图像、文本框、按钮、输入框的基本使用"><a href="#图像、文本框、按钮、输入框的基本使用" class="headerlink" title="图像、文本框、按钮、输入框的基本使用"></a>图像、文本框、按钮、输入框的基本使用</h1><p><strong>图像</strong>与<strong>文本框</strong>的主要作用是<strong>展示</strong>，<strong>按钮</strong>与<strong>输入框</strong>的主要作用是<strong>交互</strong>。</p>
<h2 id="例子（山寨英雄联盟登录界面）"><a href="#例子（山寨英雄联盟登录界面）" class="headerlink" title="例子（山寨英雄联盟登录界面）"></a>例子（山寨英雄联盟登录界面）</h2><p>接下来我们来制作一个英雄联盟登录界面。</p>
<p>将素材文件夹里UI文件夹拖拽导入到Unity编辑器的Assets文件夹下。</p>
<p>设置Scene视窗为2D模式，删除Canvas下的所有物体。</p>
<p>在Canvas下新建一个UI|Image，在其Rect Transform组件下设置Anchor Presets为strech-strech（按住Shift+Alt）。</p>
<p>选中UI/公用下的所有素材，在Inspector里设置Texture Type为Sprite(2D and UI)，点击Apply。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200409220746711.png" alt="image-20200409220746711"></p>
<p>将BG01的Sprite拖拽到Image的Image组件|Source Image。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200409221207909.png" alt="image-20200409221207909"></p>
<p>然后用给画布新添一个Image，重命名为BG，Source Image拖入“公用”文件夹下的Logo，点击Set Native Size(设置原生大小)</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200409221505464.png" alt="image-20200409221505464"></p>
<p>重命名为Logo，然后移动到背景左上角</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200409222853090.png" alt="image-20200409222853090"></p>
<p>在画布下新建一个UI|Panel（面板），默认和画布大小一致，重命名为UserPanel，将BG和Logo拖拽到UserPanel子项。</p>
<p>将“UI/用户模块”路径下所有素材设置Texture Type为Sprite(2D and UI)。</p>
<p>在UserPanel下新建一个Image，重命名为LoginBG，Source Image拖入“UI/用户模块“文件夹下的UserBack，并设置为原生大小。</p>
<p>在UserPanel下新建一个Image，重命名为Account，Source Image拖入“UI/用户模块“文件夹下的Account，并设置为原生大小。</p>
<p>通过快捷键Ctrl+D复制一个Account，重命名为PWD，Source Image拖入“UI/用户模块“文件夹下的PWD，并设置为原生大小。</p>
<p>在UserPanel下新建一个Image，重命名为Line，Source Image拖入“UI/用户模块“文件夹下的Line，并设置为原生大小。</p>
<p>通过快捷键Ctrl+D复制一个Line，然后将两个Line分别拖入Account、PWD的子项。</p>
<p>通过上述类似方法，给UserPanel添加按钮：WebsiteBtn、ContactsBtn、RetrievePWDBtn、LoginBtn、RegisterBtn</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200409230946776.png" alt="image-20200409230946776"></p>
<p>给UserPanel添加UI|Text，设置文本组件如下：</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410111607619.png" alt="image-20200410111607619"></p>
<p>给UserPanel添加UI|InputField（文本输入框），摆放到合适位置，调整大小合适，选中其子项Placeholder和Text，在Inspector里修改字体大小（Font Size）为20。</p>
<p>复制一个InputField，将两个InputField的Image组件|Color设为透明。修改两个文本输入框的Placeholder、Text的Text组件设置。选中密码输入的InputField，可以修改其Input Field组件的Content Type（内容类型）为Password。完成设置后，将账号输入框重命名为UserInputField，将密码输入框重命名为PWDInputField。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410115134419.png" alt="image-20200410115134419"></p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410115238890.png" alt="image-20200410115238890"></p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410115329852.png" alt="image-20200410115329852"></p>
<p>为了让UI元素的摆放和美术人员给的效果图一致，我们可以采用如下方法改进：</p>
<p>给UserPanel的Image组件|Source Image拖入“用户模块”图片，点击Color，设置alpha值为最大（设置不透明度为最大），然后将BG取消勾选。此时我们发现原来的UI元素摆放位置和效果图有明显差距，将UI元素对应摆放到对应的位置将其覆盖即可。</p>
<p>完成后将UserPanel的图片设置为透明，勾选BG。</p>
<h1 id="图像、文本框、按钮、输入框的脚本交互"><a href="#图像、文本框、按钮、输入框的脚本交互" class="headerlink" title="图像、文本框、按钮、输入框的脚本交互"></a>图像、文本框、按钮、输入框的脚本交互</h1><p>在Assets文件夹下创建文件夹Scripts用于存放脚本文件。</p>
<p>创建C#脚本UserPanel.cs，将UserPanel.cs作为组件添加到UserPanel。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.UI;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UserPanel</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> Sprite bg;</span><br><span class="line">    InputField userInput;</span><br><span class="line">    InputField pwdInput;</span><br><span class="line">    Button logonBtn;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="comment">//修改图片的精灵</span></span><br><span class="line">        transform.Find(<span class="string">"BG"</span>).GetComponent&lt;Image&gt;().sprite = bg;</span><br><span class="line">        <span class="comment">//初始化</span></span><br><span class="line">        userInput = transform.Find(<span class="string">"UserInputField"</span>).GetComponent&lt;InputField&gt;();</span><br><span class="line">        pwdInput = transform.Find(<span class="string">"PWDInputField"</span>).GetComponent&lt;InputField&gt;();</span><br><span class="line">        logonBtn = transform.Find(<span class="string">"LogonBtn"</span>).GetComponent&lt;Button&gt;();</span><br><span class="line">        <span class="comment">//没有参数的方法</span></span><br><span class="line">        <span class="comment">//绑定事件</span></span><br><span class="line">        logonBtn.onClick.AddListener(loginBtnOnClick);</span><br><span class="line">        transform.Find(<span class="string">"WebsiteBtn"</span>).GetComponent&lt;Button&gt;()</span><br><span class="line">            .onClick.AddListener(WebsiteBtnOnClick);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">WebsiteBtnOnClick</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Application.OpenURL(<span class="string">"https://lol.qq.com/main.shtml"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">loginBtnOnClick</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">string</span> account = userInput.text;</span><br><span class="line">        <span class="keyword">string</span> pwd = pwdInput.text;</span><br><span class="line">        Debug.Log(<span class="string">"账号是："</span> + account);</span><br><span class="line">        Debug.Log(<span class="string">"密码是："</span> + pwd);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将“UI/公共”路径下的BG02放入UserPanel的UserPanel脚本组件|bg中，播放游戏，可以看到游戏一启动我们的背景图换成了BG02，在账号输入框和密码输入框输入文本，点击登录按钮，Unity控制台窗口打印账号和密码内容，点击官网按钮，打开英雄联盟官网。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410144456902.png" alt="image-20200410144454523"></p>
<h1 id="勾选框"><a href="#勾选框" class="headerlink" title="勾选框"></a>勾选框</h1><h2 id="单选"><a href="#单选" class="headerlink" title="单选"></a>单选</h2><p>给UserPanel添加UI|Toggle，编辑Toggle下的Label的Text组件|Text。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410171601814.png" alt="image-20200410171601814"></p>
<p>选中Toggle下的Background，调整勾选框致合适大小，选中Background下的Checkmark，将其锚点设置为stretch-stretch。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410171834994.png" alt="image-20200410171834994"></p>
<p>播放游戏，当Toggle被勾选上时，Toggle的Toggle组件下的Is On会被勾选</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410172021614.png" alt="image-20200410172021614"></p>
<p>修改我们的UserPanel.cs，添加一个Toggle类型变量toggle，Start方法添加获取Toggle语句。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Toggle toggle;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Start is called before the first frame update</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    toggle = transform.Find(<span class="string">"Toggle"</span>).GetComponent&lt;Toggle&gt;();</span><br></pre></td></tr></table></figure>

<p>修改loginBtnOnClick方法如下。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">loginBtnOnClick</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(toggle.isOn == <span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">string</span> account = userInput.text;</span><br><span class="line">        <span class="keyword">string</span> pwd = pwdInput.text;</span><br><span class="line">        Debug.Log(<span class="string">"账号是："</span> + account);</span><br><span class="line">        Debug.Log(<span class="string">"密码是："</span> + pwd);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">"请先同意用户隐私协议"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>播放游戏，当勾选框没有被勾选时，点击登录按钮，控制台不会打印我们输入的账号和密码。</p>
<h2 id="多选一"><a href="#多选一" class="headerlink" title="多选一"></a>多选一</h2><p>我们复制三个Toggle，再新建一个空的GameObject，给空GameObject添加Toggle Group组件，同时选中前边的三个Toggle，将GameObject拽到Inspector的Toggle组件|Group下。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410173308051.png" alt="image-20200410173308051"></p>
<p>播放游戏，这三个勾选框只允许勾选其中一个。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410173544673.png" alt="image-20200410173544673"></p>
<h1 id="滑动条"><a href="#滑动条" class="headerlink" title="滑动条"></a>滑动条</h1><p>我们在Canvas下新建一个Panel，重命名为SettingPanel，设置其Image组件|Color为黑色，不透明度适当提高，使SettingPanel显示很暗。</p>
<p>在SettingPanel下新建一个UI|Slider，我们可以对它的三个子项进行个性化设置，我在此只修改了大小和颜色。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410180311571.png" alt="image-20200410180311571"></p>
<p>当我们播放游戏时，滑动Slider可以改变其Slider组件|Value的值</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410180625592.png" alt="image-20200410180625592"></p>
<p>要在脚本中获取滑动条的值，我们先创建一个SettingPanel.cs，编写代码如下：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"><span class="keyword">using</span> UnityEngine.UI;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SettingPanel</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    Slider slider;</span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        slider = transform.Find(<span class="string">"Slider"</span>).GetComponent&lt;Slider&gt;();</span><br><span class="line">        slider.onValueChanged.AddListener(OnValueChanged);     </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">OnValueChanged</span>(<span class="params"><span class="keyword">float</span> <span class="keyword">value</span></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        Debug.Log(<span class="string">"当前滑动条的进度："</span> + slider.<span class="keyword">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后将SettingPanel.cs作为组件添加到SettingPanel。播放游戏，当我们滑动Slider，控制台将实时打印Value的值。</p>
<h1 id="滚动视图、遮罩、布局组件、内容尺寸适配器"><a href="#滚动视图、遮罩、布局组件、内容尺寸适配器" class="headerlink" title="滚动视图、遮罩、布局组件、内容尺寸适配器"></a>滚动视图、遮罩、布局组件、内容尺寸适配器</h1><h2 id="滚动视图"><a href="#滚动视图" class="headerlink" title="滚动视图"></a>滚动视图</h2><p>给Canvas新建一个UI|Scrow View（滚动视图）,我们可以在Scrow View|Viewport|Content下放入要装的UI元素比如图片。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410213421959.png" alt="image-20200410213421959"></p>
<p>Content是我们要填装UI元素的容器，单独选中Content改变其大小可以展示总面积。如上图，在其中放入Image后还需要适当调整Image的位置。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410214338872.png" alt="image-20200410214338872"></p>
<p>Handle是滑条，要改变滑条背景需要在Scrollbar Horizontal/Vertical里设置。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410213852276.png" alt="image-20200410213852276"></p>
<h2 id="遮罩"><a href="#遮罩" class="headerlink" title="遮罩"></a>遮罩</h2><p>在滚动视图的Viewport里有一个Mask组件，当我们取消勾选后，将显示被遮住的内容。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410214533455.png" alt="image-20200410214533455"></p>
<p>我们给Panel新建一个Image，展示颜色为红色，选中Image再新建一个Image，设置颜色为黄色。调整黄色Image的大小使之盖过红色Image，当我们给父物体红色Image添加Mask组件后，子物体黄色Image超出部分会被父物体的遮罩覆盖。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410215829723.png" alt="image-20200410215829723"></p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410215921935.png" alt="image-20200410215921935"></p>
<h2 id="水平-垂直-网格布局组件"><a href="#水平-垂直-网格布局组件" class="headerlink" title="水平/垂直/网格布局组件"></a>水平/垂直/网格布局组件</h2><p>给Content添加组件Horizontal/Vertical/Grid Layout Group，将使content内的UI元素全部呈水平/垂直排列，并做针对设置。下图给了一个垂直布局组件效果，同时我也在Padding处设置了边距</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410221507116.png" alt="image-20200410221507116"></p>
<h2 id="布局元素"><a href="#布局元素" class="headerlink" title="布局元素"></a>布局元素</h2><p>给Content下的UI元素比如Image添加Layout Element组件后，勾选Ignore Layout，该Image将不受其他三种布局组件影响，可以随意放置。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200410222931803.png" alt="image-20200410222931803"></p>
<h2 id="内容尺寸适配器"><a href="#内容尺寸适配器" class="headerlink" title="内容尺寸适配器"></a>内容尺寸适配器</h2><p>给Content添加组件Content Size Fitter，在Content Size Fitter|Vertical Fit选择Preferrd Size，Content的尺寸大小将根据内容布局自动调整。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200411104056877.png" alt="image-20200411104056877"></p>
<p>将Panel重命名为HeroPanel，将Content下第一个Image重命名做成预制体Hero，创建脚本HeroPanel.cs，编写代码如下：</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Collections;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">HeroPanel</span> : <span class="title">MonoBehaviour</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> GameObject hero;</span><br><span class="line">    <span class="keyword">public</span> Transform content;</span><br><span class="line">    <span class="comment">// Start is called before the first frame update</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Start</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Update is called once per frame</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Update</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (Input.GetKeyDown(KeyCode.A))</span><br><span class="line">        &#123;</span><br><span class="line">            GameObject _hero = GameObject.Instantiate(hero);</span><br><span class="line">            _hero.transform.parent = content;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将HeroPanel.cs添加到HeroPanel，将Hero预制体拖入HeroPanel组件|hero，将Content拖入HeroPanel组件|content。播放游戏，当我们删掉Content下大部分Image，然后鼠标在Game窗口里点击一下，按A键克隆Hero，选中Content我们可看到Content随着Hero的增加动态调节尺寸适应内容。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200411105741808.png" alt="image-20200411105741808"></p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200411105811893.png" alt="image-20200411105811893"></p>
<p>内容尺寸适配器的另一种常见用法：</p>
<p>给HeroPanel添加一个Text，给Text添加组件Content Size Fitter，Content Size Fitter下边两个属性全部设置为Preferrd Size。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200411110920125.png" alt="image-20200411110920125"></p>
<p>我们输入成段的文本，Content对根据包括换行回车在内的文本内容进行自适应。</p>
<p><img src="/2020/04/04/UGUI%E5%9B%BE%E5%BD%A2%E7%B3%BB%E7%BB%9F/image-20200411111028122.png" alt="image-20200411111028122"></p>
<h1 id="矩形变换、UI特效、图片填充"><a href="#矩形变换、UI特效、图片填充" class="headerlink" title="矩形变换、UI特效、图片填充"></a>矩形变换、UI特效、图片填充</h1></div></article></div><div class="right-container"><div class="widget"><div id="arAnchorBar"></div></div></div></section></div><div class="right-menu"></div><div class="modal search-modal"><div class="input-field"><input type="text" id="search_input"><label for="search-input">搜索</label></div><div id="search_result" class="search-result"></div></div><div class="blog-overlay"></div><footer class="row"><div class="footer-con"><div class="paginator"><a href="/2020/04/06/C%20Sharp%E4%B8%8EMySql%E4%BA%A4%E4%BA%92/" title="C#与MySQL交互" class="prev">PREV</a><a href="/2020/04/04/C%20Sharp%E5%A7%94%E6%89%98%E4%B8%8E%E4%BA%8B%E4%BB%B6/" title="C#委托与事件" class="next">NEXT</a></div><div class="copyright"><p>© 2016 - 2020 <a target="_blank">MJ</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> <br> and <a href="https://github.com/Bulandent/hexo-theme-bubuzou" target="_blank">hexo-theme-bubuzou</a></p><p> <span style="padding-right: 6px;">闽ICP备16007301号-2</span></p></div><div class="totop"><i></i></div></div></footer><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script src="/scripts/jquery-1.8.2.min.js"></script><script src="/scripts/ar-anchor.js"></script><script src="/scripts/main.js"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>